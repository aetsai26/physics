<!DOCTYPE html>
<html>
    <head>
        <style type="text/css">
        
            body{
                width:100%;
                height: 100%;
            }
        </style>
    </head>
    <body>
        <div id="container">
            <canvas id="myCanvas" width="400" height="400" style="border:1px solid #000000;"></canvas><br>
        </div>
        <p>Press Space to Launch the ball</p>
        <p id="velocity"></p>
        <script type="text/javascript" >
            var canvas = document.getElementById("myCanvas");
            var ctx = canvas.getContext("2d");
            var x=canvas.width/8;
            var y=canvas.height/2;
            var maxHeight=y;
            var bwidth=canvas.width/50;
            var bheight=canvas.height/10;
            var radius=bwidth;
            var restitution=.75
            var dx=5;
            var dy=0;
            var mousePos=getMousePos(canvas, "mousemove")
            var angle=0;
            var bx=Math.random()*canvas.width
            var by=Math.random()*canvas.height
            var gravity=(9.81)/100;
            function drawBall(x, y){
            	ctx.beginPath();
            	ctx.arc(x,y,radius,0,2*Math.PI);
            	ctx.fillstyle="#0033FF";
            	ctx.fillStroke="#0033FF";
            	ctx.Stroke="10";
            	ctx.fill();
            	ctx.closePath();
            }
            
            
            function drawTarget(x, y){
                ctx.beginPath();
                ctx.rect(x,y, bwidth, bheight);
                ctx.fill();
                ctx.closePath();
            }
            
            function draw(){
                ctx.clearRect(0,0, canvas.width, canvas.height);
                drawBall(x,y);
                drawTarget(bx, by);
                dy+=gravity;
                
                if(x+(radius+2)>canvas.width){
                    dx=-(dx*restitution);
                    x=canvas.width-(radius+2);
                }
                else if(x-(radius+2)<0){
                    dx=-(dx*restitution);
                    x=(radius+2);
                }
                if(y+(radius+2)>canvas.height){
                    dy=-(dy*restitution);
                    y=canvas.height-(radius+2);
                }
                else if(y-(radius+2)<0){
                    dy=-(dy*restitution);
                    y=radius;
                }
                
                if(collision(dx, dy)){
                    dx=-(dx*restitution);
                    bx=Math.random()*canvas.width;
                    by=Math.random()*canvas.height;
                }
                
                
                y+=dy;
                x+=dx;
                document.getElementById("velocity").innerHTML="x:"+dx.toString() +"y:"+dy.toString();
            }
            
            
            canvas.addEventListener("mousemove", function(e){
                mousePos=getMousePos(canvas, e);
            });
            
            
            function collision(dx, dy){
                if((((x+radius > bx && x+radius < bx+bwidth))||(x-radius > bx && (x-radius < bx+bwidth))) && (((y+radius > by && (y+radius < by+bheight)))||(y-radius > by && (y-radius < by+bheight)))){
                    return true;
                }
            }
            
            
            function getMousePos(canvas, evt) {
                var rect = canvas.getBoundingClientRect();
                return {
                  x: evt.clientX,
                  y: evt.clientY
                };
            }
            
            function init(){
                ctx.clearRect(0,0,canvas.width, canvas.height);
                ctx.beginPath();
                drawBall(canvas.width/8, canvas.height/2);
                ctx.lineTo(mousePos.x, mousePos.y);
                ctx.stroke();
                ctx.closePath();
                drawTarget(bx, by);
            }
            
            
            function start(){
                if(mousePos.x>canvas.width){
                    mousePos.x=canvas.width;
                }
                if(mousePos.y>canvas.height){
                    mousePos.y=canvas.height;
                }
                
                
                dx=bwidth*((mousePos.x-canvas.width/8)/(canvas.width));
                dy=bwidth*(mousePos.y-canvas.height/2)/(canvas.height/2);
                draw();
                clearInterval(interval);
                interval=setInterval(draw, 10);
               document.getElementById("velocity").innerHTML="x:"+dx.toString() +"y:"+dy.toString();
            }
            
            document.addEventListener("keypress", function(e){
                if(e.keyCode==32){
                    start();
                }    
                
            });
            
            var interval=setInterval(init, 10);
            
            
    
             
        </script>
    </body>
</html>